monolog:
  channels:
    - request
    - business

when@dev:
  monolog:
    handlers:
      main:
        type: rotating_file
        path: "%kernel.logs_dir%/dev.log"
        level: debug
        max_files: 10
        formatter: monolog.formatter.json

      # Separate file for request logs
      request:
        type: rotating_file
        path: "%kernel.logs_dir%/request.log"
        level: info
        max_files: 7
        channels: [request]
        formatter: monolog.formatter.json

      # Separate file for business events
      business:
        type: rotating_file
        path: "%kernel.logs_dir%/business.log"
        level: info
        max_files: 30
        channels: [business]
        formatter: monolog.formatter.json

      console:
        type: console
        process_psr_3_messages: false
        channels: ["!event", "!doctrine", "!request"]

when@prod:
  monolog:
    handlers:
      main:
        type: rotating_file
        path: "%kernel.logs_dir%/prod.log"
        level: error
        max_files: 10
        formatter: monolog.formatter.json

      # Request logs in production
      request:
        type: rotating_file
        path: "%kernel.logs_dir%/request.log"
        level: info
        max_files: 14
        channels: [request]
        formatter: monolog.formatter.json

      # Business events in production
      business:
        type: rotating_file
        path: "%kernel.logs_dir%/business.log"
        level: info
        max_files: 90
        channels: [business]
        formatter: monolog.formatter.json

when@test:
  monolog:
    handlers:
      main:
        type: null
        level: debug